<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Clifford - Music Events</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f2f2f2;
    }
    h1 {
      text-align: center;
    }
    #map {
      height: 400px;
      width: 100%;
      margin-bottom: 20px;
    }
    .event {
      background: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      margin: 10px 0;
      position: relative;
    }
    .delete-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 4px 8px;
      font-size: 12px;
      background-color: #ff4c4c;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .admin-controls, #event-form, #filter-form {
      display: none;
      margin-bottom: 20px;
    }
    button {
      margin: 5px 0;
      padding: 10px 15px;
      font-size: 14px;
    }
    input, select, textarea {
      margin: 5px 0;
      padding: 8px;
      width: 100%;
      box-sizing: border-box;
    }
  </style>
</head>
<body>

  <h1>üéµ Clifford ‚Äì Music Events Map</h1>

  <!-- Buttons to toggle forms -->
  <button onclick="toggleFilter()">üîç Find Event</button>
  <button onclick="toggleCreateForm()">‚ûï Create Event</button>

  <!-- Filter form -->
  <div id="filter-form">
    <label for="styleFilter">Filter by music style:</label>
    <select id="styleFilter" onchange="filterEvents()">
      <option value="">All styles</option>
      <option value="Jazz">Jazz</option>
      <option value="Rock">Rock</option>
      <option value="Pop">Pop</option>
      <option value="Funk">Funk</option>
      <option value="Classical">Classical</option>
    </select>
  </div>

  <!-- Map -->
  <div id="map"></div>

  <!-- Create Event Form -->
  <div id="event-form">
    <h2>Create New Event</h2>
    <input type="text" id="title" placeholder="Title">
    <textarea id="description" placeholder="Description"></textarea>
    <input type="text" id="date" placeholder="Date and Time (e.g., 2025-07-01 19:30)">
    <input type="text" id="location" placeholder="Location (address)">
    <select id="style">
      <option value="">Select music style</option>
      <option value="Jazz">Jazz</option>
      <option value="Rock">Rock</option>
      <option value="Pop">Pop</option>
      <option value="Funk">Funk</option>
      <option value="Classical">Classical</option>
    </select>
    <button onclick="addEvent()">‚úÖ Submit Event</button>
  </div>

  <!-- Events will appear here -->
  <div id="events"></div>

  <!-- Admin mode -->
  <div style="margin-top: 40px;">
    <h3>Admin Mode</h3>
    <input type="password" id="admin-password" placeholder="Enter admin password">
    <button onclick="checkAdmin()">Unlock Admin Mode</button>
  </div>

  <script>
    const adminPassword = "2412";
    let isAdmin = false;
    let events = [];

    function initMap() {
      const map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 47.48, lng: 9.74 },
        zoom: 8,
      });

      window.mapInstance = map;
      loadEvents();
    }

    function loadEvents() {
      // Simulated loading
      events = JSON.parse(localStorage.getItem("events")) || [];
      renderEvents();
    }

    function renderEvents() {
      const eventContainer = document.getElementById("events");
      eventContainer.innerHTML = "";
      events.forEach((event, index) => {
        if (matchesFilter(event)) {
          const div = document.createElement("div");
          div.className = "event";
          div.innerHTML = `
            <strong>${event.title}</strong><br>
            <em>${event.description}</em><br>
            üìÖ ${event.date}<br>
            üìç ${event.location}<br>
            üéµ ${event.style}
          `;
          if (isAdmin) {
            const btn = document.createElement("button");
            btn.innerText = "Delete";
            btn.className = "delete-btn";
            btn.onclick = () => deleteEvent(index);
            div.appendChild(btn);
          }
          eventContainer.appendChild(div);

          // Add marker to map
          const geocoder = new google.maps.Geocoder();
          geocoder.geocode({ address: event.location }, (results, status) => {
            if (status === "OK") {
              new google.maps.Marker({
                map: window.mapInstance,
                position: results[0].geometry.location,
                title: event.title,
              });
            }
          });
        }
      });
    }

    function addEvent() {
      const title = document.getElementById("title").value;
      const description = document.getElementById("description").value;
      const date = document.getElementById("date").value;
      const location = document.getElementById("location").value;
      const style = document.getElementById("style").value;

      if (!title || !location || !date) {
        alert("Please fill out all required fields.");
        return;
      }

      events.push({ title, description, date, location, style });
      localStorage.setItem("events", JSON.stringify(events));
      renderEvents();
      document.getElementById("event-form").style.display = "none";
    }

    function deleteEvent(index) {
      if (!isAdmin) return;
      if (confirm("Are you sure you want to delete this event?")) {
        events.splice(index, 1);
        localStorage.setItem("events", JSON.stringify(events));
        renderEvents();
      }
    }

    function checkAdmin() {
      const input = document.getElementById("admin-password").value;
      if (input === adminPassword) {
        isAdmin = true;
        alert("Admin mode activated!");
        renderEvents();
      } else {
        alert("Incorrect password.");
      }
    }

    function toggleCreateForm() {
      const form = document.getElementById("event-form");
      form.style.display = form.style.display === "none" ? "block" : "none";
    }

    function toggleFilter() {
      const filter = document.getElementById("filter-form");
      filter.style.display = filter.style.display === "none" ? "block" : "none";
    }

    function matchesFilter(event) {
      const filter = document.getElementById("styleFilter");
      if (!filter) return true;
      return !filter.value || event.style === filter.value;
    }

    function filterEvents() {
      renderEvents();
    }
  </script>
  <script async
    src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&callback=initMap">
  </script>
</body>
</html>
